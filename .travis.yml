language: php
php:
- 7.4
script: "./scripts/php_build.sh"
before_install:
- chmod +x ./scripts/php_build.sh
- chmod +x ./scripts/cf-blue-green-deploy.sh
before_deploy:
- echo "Updating packages.."
- wget -q -O - https://packages.cloudfoundry.org/debian/cli.cloudfoundry.org.key |
  sudo apt-key add -
- echo "deb https://packages.cloudfoundry.org/debian stable main" | sudo tee /etc/apt/sources.list.d/cloudfoundry-cli.list
- sudo apt-get update
- echo "Installing cf cli"
- sudo apt-get install cf7-cli
- cf -v
- echo "Installing cf blue-green deploy plugin"
- cf add-plugin-repo CF-Community https://plugins.cloudfoundry.org
- cf install-plugin blue-green-deploy -r CF-Community -f
- echo "Plugin installed"
branches:
  only:
  - feature/SINF-186_create_skeleton
deploy:
  provider: script
  skip_cleanup: true
  script: "./scripts/cf-blue-green-deploy.sh ccs-scale-buyer-ui manifest.yml sandbox"
  on:
    branch: feature/SINF-186_create_skeleton
env:
  global:
  - secure: ce3rOjbgMij16we8eZoLgbRasAGqLwB6o1De05Bb0CcVntq7AgGWic1ZQKdztBFDqctJU9LHzmrVfYq5CHcN7o9FxX6/NBN24u4Ro+uoFWG8dDbsGEkAAAq+IaOczNC6sijPd1Yxhwhj698SXteONOMY9J9ocVBM0cS7ia/x0aWo9ijTN3+0vrJpKwLc/k6o6EWxYtEstevnGcprWW4BE7xbMnUJv7VzO0VgBYNWspo4bEl9Cp0mNcTgkOzXKvBI8LqbqZx1wG2YiO7TBHAJDbSaBN5Bs2N4LiYOmtNo6ll4L0YnmbMQ+u1pCJ7pcQ5PFfbZaCwYPxtBk+94E+i8ohJykzJnozzh89UDLLbCoV/i5L8kGJlVb7cB2a+ItsOmjba6xe5zIrcwIi7ajFr8jsbPFhIDR1SQxG+dPQSitWLhSVotoNm1nszw7LxGprtU4nSYdRWawzBhWeZY97bSK7vV10Pc4qJUEiM3yL9lduENebR5l1nPsB7KQMyuddRv9UnmOORsOOARdXSxWEbUl4Iwae2OPuoKnWs2Im9G/eJYUsKD8iJeTlOlqYI7Sd8hfOGTBXqDnx7RBUxaqsBIEEEGwo5y9naE0F2q1ygXNuxutTXtgPpUrgYKmLn71/f4drqlWWDcq7Pra1nI3VwAr+rGBORqGMME6KfEcwe4Mcg=
  - secure: Aq4dmEkx2t2D+zurr0ZJRA75tStU6fUp1gUVKAUYF+5P2+U9tZMDnij3KzF3jaTimsbHfJfjmP/Fmo+JjkrFJhBLvy45v2KyBwx0iS1U6jRcXw1+ka4tRUyljCa2/N01zXaywNYevX2kDGNvPZokUjh9Hs7Tl8WhT81vXzwMfpCS8TOrbcpG6dEUAbuYz2wsm4tWIQ/nKq5YtYJShE6D/7QN1r6UQZIfXPzmYxyNNlBpWKpZpSOs15GBA1ULMAvtfTe5HK7yAujhZhxKiQyFqMe04aMneoHYDS4AN08usEmgYK4Ed/ZIsOSVtKEe/xo6sH64NCvwTCK1NnvgldzHDO9560ZJSmhBhTzYP68ckQCrLRSmbMTjkFU3QTIW0uZT3KYSVbfxywWcXyrCETlot4UAbmxU+wA64NhxBf+A1qIeyhbX6vMkkOhAly7vTL0bcQwu5LUnzY6bI3ujtOFP+mna8A0tOsNZrjOyJy1qdT5y5tsaFhDiwQAuNuY+sh988rJ9A+KPdkgLrY4qtd/5uNR+P2gEfqLLaXV8avDHTNouv9cH249FolKUVQuCqYLi+O8JeF6I42bdc6axEvmhpoot7MXNjtF6Gd+GK0wABdpRfcGz8CEuEQ+4AJCDjKBEGV6n/GvwNA8Tj0wDS0BCOdZGPn9Qle9vcIxgdWQi4Tk=
  - secure: lvRuICAB6Rp1nuEOJcq6Qb+3e2k8jRT7TyrVg+CfjRcJgYdqygiELuM/7oqZXIhTz8HF9ECrdul9vQbl7bUpoiBZvBWw8TpxMtpzeRMsRmUgvXshRkQ4TmiJzSvMZ38SKT7f37WeueQaaAqgSLYK7545lXny8amotOLWQ/dSMiiBTiicmMKevzF/o93hnfgp9XeVEUghendyNvPzlPMokFUeatlsAVIneQ3LpQW0ZH+8JXxqec/LAD/QpSkaVIpVKbSEKHmbOEdFc80mIhCa4cBLpPBhY+PWHWBWg+rqnWzT0nj6JG01ARo2AZcNjGiWVJNVFqeY4hzkvo/GTg8h3Bm3G/mtTDpQMiTB/nP15ExmcfRxYDVPt4laCtCmfkbvBBv7Xfq3ZznBRIxvXiqeh4I3WosvT5vPsUM1wj14WmX5AIG3JE/ZBHkpAyRiK5BhWDYlcenHRE0Em6A5ZtDwEflcZESlIQFmyfeYJaAnDNoG5R8uTZQbbVneZ8IaKYhNLB0p0NefzjGrAt97q9yn9ON76iZBFHOh+vkOkaoJE4HHPl+W7ACuZ5Drg4paOk1NT3wr/l75QgCueQHcl0+f8KKac2pBfZKLrlyj6s2mrp+LmPbrqja4bULfwTWhNyOYIIJeqm8B4gEjcK0BvynbF8UlqUSpazl7Wmv55Z0yrB4=
  - secure: FLNipl+AxHzVbpi0QwkjTVvbrEAEJFQRQeqJsriU1au8Uq16jnt1KVV4bF5VDGA/9rWo6BsMlzkvl50Qr+X0rDebQdxAT/rUN0XdG5r+H97D12n3cSkgqgZZ/ZT0QgGVneM2iFzukhxSRQOFhFgxBaK9jRckBBrGhL9GQbtrVmS++0+cVyZmdAj06/4EPgrf4pIFkyV/mUt60onBbuerSLeigZmdUKWReiDviF2Veboy6bOtfdlsuuO16dkwqrOc2x06tlVh64ERBkNlhJpM4s8vU6ydieOrOdeS1SeH0uSc228wIan92V37rHi8ZWt2gJpdlbM9shA9440qHy8aCNLNL/CTGCSu8RDFqKSpPsI/U9Ce9mp4Y4jA5lnblMrK9S245zKhl8VyCdOOiBBJXf2VbCHwQ8x00kz/aRDBb/LSoyqjRq8ub5FTER8qabgPj+wPilFYoRiHIXxpT3TEX9pwheLCRnNhF/NqC+JIGuQCVh4tgxbF7ibReclMa8CM3wFRBmkguEYxYj/d3t69E9LQ8qMRZAjpPVXNB0PAywfqMLtLUQkvp2/u/0Nv+jyaJ57HMhcYSZiyfM0X/xhNQte7RalXMY0ZQryCf0gx2U5nBIteSLRp3KnNwo9+7p3R4Gtw9Sa8QDkjwZ5/lAETAOiVZOVqpfwix86V1jM0ejs=
  - secure: bsvJtOXS0PCqFLssi8/RQKYzpI+WSfOa59hDKtHSFhjnqYUEsX7TOkgDctCzs9Cw4JJQeFpAEskA0fjgKWj7o55qtqNo/0K95BHFxkJvDXIYE4ISC7flJwmUrdMkBTgYLwQw9MdE0pvPA+G9vcwDODOvGxnkqsfmfMJPnRwfRX6BkUClx2+MAwAaahV1+8cNKLKxZxc8+NCTghBPZ07IRjZobz8wgbzWFGfVHiHRQKzJ03u7cjQN9liVgbuW8QqkMVX7PiFeq0J6mHb3zdM6iDz9hnOwsF70fZnjRH2IyrTHrFjnPZ/xYaDSrfNJ/nygpRHDC4WG0lPPSikpnj6zVlj1LEcyxdJ6Ru57G58uY+V/HFPuPuCHLcykiyVft2huH7RlKu2Eyf0PbXNfdWD+lMWV5IcTmjB9gfmKKD7Wudjv8G3lp6p4AGVaw09qERyUlErWgkJPK3zjIHnPxrIftYftiHJFbgoJAUlSLLm41ZPyjTz5oT41rtOnqkn9o2SJlQ61B8BbrRhcmZyo1CQaK3obieDi7WnXzlU+PLiCUzu4pPw8cWM/CzCFBoYfjk0w79yyBzClGcVNYa8tbMZuw/fz1v4jZqGAFibRdWKG+l0R5F5fgdBcBCuJRJ788LKk4KTASIfHms9EWlQQW0pdlbuBpwoJ1S0+9dDaqbZGfuA=
